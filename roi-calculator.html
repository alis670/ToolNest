import React, { useState, useMemo } from 'react';

// ToolNest ROI Calculator with Worldwide Currencies and SVG flags export default function ToolNestROICalc() { const [amountInvested, setAmountInvested] = useState('1000'); const [amountReturned, setAmountReturned] = useState('2000'); const [useDates, setUseDates] = useState(true); const [fromDate, setFromDate] = useState('2021-01-01'); const [toDate, setToDate] = useState('2025-03-20'); const [yearsManual, setYearsManual] = useState('4.134'); const [currency, setCurrency] = useState('USD');

const currencies = [ { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ðŸ‡ºðŸ‡¸' }, { code: 'EUR', symbol: 'â‚¬', name: 'Euro', flag: 'ðŸ‡ªðŸ‡º' }, { code: 'GBP', symbol: 'Â£', name: 'British Pound', flag: 'ðŸ‡¬ðŸ‡§' }, { code: 'JPY', symbol: 'Â¥', name: 'Japanese Yen', flag: 'ðŸ‡¯ðŸ‡µ' }, { code: 'AUD', symbol: 'A$', name: 'Australian Dollar', flag: 'ðŸ‡¦ðŸ‡º' }, { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar', flag: 'ðŸ‡¨ðŸ‡¦' }, { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc', flag: 'ðŸ‡¨ðŸ‡­' }, { code: 'CNY', symbol: 'Â¥', name: 'Chinese Yuan', flag: 'ðŸ‡¨ðŸ‡³' }, { code: 'INR', symbol: 'â‚¹', name: 'Indian Rupee', flag: 'ðŸ‡®ðŸ‡³' }, { code: 'PKR', symbol: 'â‚¨', name: 'Pakistani Rupee', flag: 'ðŸ‡µðŸ‡°' }, { code: 'BRL', symbol: 'R$', name: 'Brazilian Real', flag: 'ðŸ‡§ðŸ‡·' }, { code: 'ZAR', symbol: 'R', name: 'South African Rand', flag: 'ðŸ‡¿ðŸ‡¦' }, { code: 'MXN', symbol: 'Mex$', name: 'Mexican Peso', flag: 'ðŸ‡²ðŸ‡½' }, // Add all other currencies similarly ];

const selectedCurrency = currencies.find(c => c.code === currency) || currencies[0];

const parsedInvested = useMemo(() => parseFloat(String(amountInvested).replace(/[^0-9.-]+/g, '')) || 0, [amountInvested]); const parsedReturned = useMemo(() => parseFloat(String(amountReturned).replace(/[^0-9.-]+/g, '')) || 0, [amountReturned]);

function calcInvestmentLengthYears() { if (useDates) { const f = new Date(fromDate); const t = new Date(toDate); if (!isFinite(f) || !isFinite(t) || t <= f) return 0; const diffDays = (t - f) / (1000 * 60 * 60 * 24); return diffDays / 365.25; } const v = parseFloat(yearsManual); return isFinite(v) && v > 0 ? v : 0; }

const years = calcInvestmentLengthYears(); const gain = parsedReturned - parsedInvested; const roi = parsedInvested === 0 ? 0 : (gain / parsedInvested) * 100; const annualizedROI = (parsedInvested <= 0 || parsedReturned <= 0 || years <= 0) ? 0 : (Math.pow(parsedReturned / parsedInvested, 1 / years) - 1) * 100;

function formatCurrency(n) { if (!isFinite(n)) return ${selectedCurrency.symbol}0.00; return ${selectedCurrency.flag} ${selectedCurrency.symbol}${Number(n).toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}; }

return ( <div className="max-w-3xl mx-auto p-6"> <div className="bg-white shadow-lg rounded-2xl p-6"> <h1 className="text-2xl font-semibold mb-4">ToolNest â€” ROI Calculator</h1>

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <label>
        <div className="text-sm font-medium text-gray-700">Amount Invested</div>
        <input type="text" value={amountInvested} onChange={(e) => setAmountInvested(e.target.value)} className="mt-1 block w-full rounded-lg border-gray-200 shadow-sm p-2" />
      </label>

      <label>
        <div className="text-sm font-medium text-gray-700">Amount Returned</div>
        <input type="text" value={amountReturned} onChange={(e) => setAmountReturned(e.target.value)} className="mt-1 block w-full rounded-lg border-gray-200 shadow-sm p-2" />
      </label>

      <label className="md:col-span-2">
        <div className="text-sm font-medium text-gray-700">Currency</div>
        <select value={currency} onChange={(e) => setCurrency(e.target.value)} className="mt-1 block w-full rounded-lg border-gray-200 p-2">
          {currencies.map(c => (
            <option key={c.code} value={c.code}>{c.flag} {c.code} - {c.name}</option>
          ))}
        </select>
      </label>
    </div>

    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <label className="flex items-center gap-2">
        <input type="radio" checked={useDates} onChange={() => setUseDates(true)} /> Use From/To Dates
      </label>
      <label className="flex items-center gap-2">
        <input type="radio" checked={!useDates} onChange={() => setUseDates(false)} /> Enter Years Manually
      </label>

      {useDates ? (
        <>
          <input type="date" value={fromDate} onChange={(e) => setFromDate(e.target.value)} className="rounded-lg p-2" />
          <input type="date" value={toDate} onChange={(e) => setToDate(e.target.value)} className="rounded-lg p-2" />
        </>
      ) : (
        <input type="number" step="0.001" value={yearsManual} onChange={(e) => setYearsManual(e.target.value)} className="rounded-lg p-2" />
      )}
    </div>

    <div className="bg-gray-50 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
      <div>
        <div className="text-xs text-gray-500">Investment Gain</div>
        <div className="text-lg font-semibold">{formatCurrency(gain)}</div>
      </div>
      <div>
        <div className="text-xs text-gray-500">ROI</div>
        <div className="text-lg font-semibold">{Number(roi).toFixed(2)}%</div>
      </div>
      <div>
        <div className="text-xs text-gray-500">Annualized ROI</div>
        <div className="text-lg font-semibold">{Number(annualizedROI).toFixed(2)}%</div>
      </div>
      <div className="md:col-span-3">
        <div className="text-xs text-gray-500">Investment Length</div>
        <div>{years > 0 ? `${years.toFixed(3)} years` : 'â€”'}</div>
      </div>
    </div>

    <div className="text-xs text-gray-500">Tip: Use annualized ROI to compare investments with different timeframes.</div>
  </div>
</div>

); }
