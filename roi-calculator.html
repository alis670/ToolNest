<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolNest Pro ROI Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    body { font-family: Arial, sans-serif; background: #f4f6f8; margin:0; padding:0;}
    header { background:#1e3a8a; color:white; padding:1rem; text-align:center; font-size:1.5rem; font-weight:bold;}
    .container { max-width:900px; margin:2rem auto; padding:2rem; background:white; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
    .input-group { margin-bottom:1rem;}
    .input-group label { display:block; margin-bottom:0.3rem; font-weight:bold;}
    .input-group input, .input-group select { width:100%; padding:0.5rem; border-radius:6px; border:1px solid #ccc; font-size:1rem;}
    button { background:#1e3a8a; color:white; border:none; padding:0.8rem 1.2rem; border-radius:6px; font-size:1rem; cursor:pointer; margin-top:1rem;}
    button:hover { background:#162b66;}
    .result { margin-top:1.5rem; font-size:1.2rem; font-weight:bold;}
    canvas { margin-top:2rem;}
    .suggestions { margin-top:1rem; font-style:italic; color:#444;}
</style>
</head>
<body>

<header>ToolNest Pro ROI Calculator</header>

<div class="container">
    <div class="input-group">
        <label for="invested">Amount Invested</label>
        <input type="number" id="invested" placeholder="Enter amount invested">
    </div>
    <div class="input-group">
        <label for="returned">Amount Returned</label>
        <input type="number" id="returned" placeholder="Enter amount returned">
    </div>
    <div class="input-group">
        <label for="time">Time Period (Months)</label>
        <input type="number" id="time" placeholder="Optional">
    </div>
    <div class="input-group">
        <label for="currency">Currency</label>
        <select id="currency">
            <option value="$">USD ($)</option>
            <option value="€">EUR (€)</option>
            <option value="£">GBP (£)</option>
            <option value="₹">INR (₹)</option>
        </select>
    </div>

    <div class="input-group">
        <label>Scenario Percentages</label>
        <input type="number" id="best" placeholder="Best-case % (e.g., 120 for 20% more)" value="120">
        <input type="number" id="expected" placeholder="Expected % (default 100)" value="100">
        <input type="number" id="worst" placeholder="Worst-case % (e.g., 80 for 20% less)" value="80">
    </div>

    <button onclick="calculateProROI()">Calculate ROI</button>
    <button onclick="downloadPDF()">Download PDF Report</button>

    <div class="result" id="result"></div>
    <div class="suggestions" id="suggestions"></div>
    <canvas id="roiChart" width="400" height="200"></canvas>
</div>

<script>
function calculateProROI() {
    const invested = parseFloat(document.getElementById('invested').value);
    const returned = parseFloat(document.getElementById('returned').value);
    const time = parseFloat(document.getElementById('time').value);
    const currency = document.getElementById('currency').value;

    if (isNaN(invested) || isNaN(returned)) {
        alert("Please enter valid investment and return amounts.");
        return;
    }

    // Scenario percentages
    const bestPct = parseFloat(document.getElementById('best').value)/100;
    const expectedPct = parseFloat(document.getElementById('expected').value)/100;
    const worstPct = parseFloat(document.getElementById('worst').value)/100;

    const roiExpected = ((returned*expectedPct - invested)/invested)*100;
    const roiBest = ((returned*bestPct - invested)/invested)*100;
    const roiWorst = ((returned*worstPct - invested)/invested)*100;

    let annualizedROI = roiExpected;
    if(time > 0){
        annualizedROI = ((Math.pow((returned*expectedPct)/invested, 12/time)-1)*100);
    }

    document.getElementById('result').innerHTML = `
        ROI (Expected): ${roiExpected.toFixed(2)}% <br>
        ROI (Best-case): ${roiBest.toFixed(2)}% <br>
        ROI (Worst-case): ${roiWorst.toFixed(2)}% <br>
        ${time ? `Annualized ROI: ${annualizedROI.toFixed(2)}%` : ''}
    `;

    // AI-based suggestions
    let suggestions = "";
    if(roiExpected < 10) suggestions = "ROI is low. Consider reducing costs or increasing revenue streams.";
    else if(roiExpected > 50) suggestions = "Excellent ROI! Keep up the strategy and consider scaling investments.";
    else suggestions = "ROI is moderate. Optimize marketing and operational efficiency.";

    document.getElementById('suggestions').innerText = suggestions;

    // Chart
    const ctx = document.getElementById('roiChart').getContext('2d');
    if(window.roiChart) window.roiChart.destroy();
    window.roiChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Worst-case','Expected','Best-case'],
            datasets: [{
                label: `ROI (%)`,
                data: [roiWorst, roiExpected, roiBest],
                backgroundColor: ['#f87171','#facc15','#34d399']
            }]
        },
        options: {
            responsive: true,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero:true } }
        }
    });
}

// PDF download
function downloadPDF(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text("ToolNest ROI Report", 14, 22);
    doc.setFontSize(12);
    const resultText = document.getElementById('result').innerText;
    const suggestionText = document.getElementById('suggestions').innerText;
    doc.text(resultText, 14, 35);
    doc.text("Suggestions: "+suggestionText, 14, 60);
    doc.save("ToolNest_ROI_Report.pdf");
}
</script>

</body>
</html>
