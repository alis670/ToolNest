<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium HR Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
<style>
  body.dark { background-color: #1a1a1a; color: #f0f0f0; }
  .dark .card { background-color: #2a2a2a; color: #f0f0f0; }
  .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; }
</style>
</head>
<body class="container mx-auto mt-10"><!-- LOGIN / SIGNUP --><div id="loginDiv" class="card p-6 rounded shadow-md bg-white">
  <h2 class="text-2xl mb-4">HR Login / Sign Up</h2>
  <div class="mb-4">
    <button id="showLogin" class="px-4 py-2 bg-blue-500 text-white rounded">Login</button>
    <button id="showSignup" class="px-4 py-2 bg-green-500 text-white rounded">Sign Up</button>
  </div>  <form id="loginForm" class="space-y-2">
    <input type="text" id="hrUserLogin" placeholder="Username" class="w-full p-2 border rounded" required>
    <input type="password" id="hrPassLogin" placeholder="Password" class="w-full p-2 border rounded" required>
    <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded">Login</button>
  </form>  <form id="signupForm" class="space-y-2" style="display:none;">
    <input type="text" id="hrUserSignup" placeholder="Choose Username" class="w-full p-2 border rounded" required>
    <input type="password" id="hrPassSignup" placeholder="Choose Password" class="w-full p-2 border rounded" required>
    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded">Sign Up</button>
  </form>
</div><!-- MAIN DASHBOARD --><div id="mainApp" style="display:none;">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-3xl font-bold">HR Dashboard</h2>
    <div>
      <button id="themeToggle" class="px-3 py-1 border rounded mr-2">Toggle Dark</button>
      <button id="logoutBtn" class="px-3 py-1 bg-red-500 text-white rounded">Logout</button>
    </div>
  </div>  <!-- ADD EMPLOYEE -->  <div class="card p-4 rounded shadow-md bg-white mb-6">
    <h3 class="text-xl font-semibold mb-2">Add Employee</h3>
    <form id="addEmployeeForm" class="grid grid-cols-6 gap-2">
      <input type="text" id="empName" placeholder="Name" class="p-2 border rounded" required>
      <input type="text" id="empDept" placeholder="Department" class="p-2 border rounded" required>
      <input type="text" id="empDesig" placeholder="Designation" class="p-2 border rounded" required>
      <input type="number" id="empSalary" placeholder="Basic Salary" class="p-2 border rounded" required>
      <select id="empCurrency" class="p-2 border rounded" required>
        <option value="">Select Currency</option>
      </select>
      <button type="submit" class="bg-blue-500 text-white rounded">Add Employee</button>
    </form>
  </div>  <!-- EMPLOYEE LIST -->  <div class="card p-4 rounded shadow-md bg-white mb-6">
    <h3 class="text-xl font-semibold mb-2">Employee List</h3>
    <table class="w-full table-auto border-collapse border" id="employeeTable">
      <tr class="bg-gray-200"><th class="border p-2">Name</th><th class="border p-2">Dept</th><th class="border p-2">Designation</th><th class="border p-2">Salary</th><th class="border p-2">Currency</th><th class="border p-2">Action</th></tr>
    </table>
  </div>  <!-- ATTENDANCE -->  <div class="card p-4 rounded shadow-md bg-white mb-6">
    <h3 class="text-xl font-semibold mb-2">Attendance</h3>
    <input type="month" id="attendanceMonth" class="p-2 border rounded mb-2">
    <div id="calendar" class="overflow-auto"></div>
    <table class="w-full border-collapse border mt-2" id="attendanceTable">
      <tr class="bg-gray-200"><th class="border p-2">Date</th><th class="border p-2">Employee</th><th class="border p-2">Status</th><th class="border p-2">Late Minutes</th><th class="border p-2">Action</th></tr>
    </table>
  </div>  <!-- SALARY CALCULATION -->  <div class="card p-4 rounded shadow-md bg-white mb-6">
    <h3 class="text-xl font-semibold mb-2">Salary Calculation</h3>
    <form id="calculateSalaryForm" class="grid grid-cols-6 gap-2">
      <select id="salaryEmployee" class="p-2 border rounded" required><option value="">Select Employee</option></select>
      <input type="date" id="startDate" class="p-2 border rounded" required>
      <input type="date" id="endDate" class="p-2 border rounded" required>
      <input type="number" step="0.1" id="overtimeHours" placeholder="Overtime Hours" class="p-2 border rounded">
      <input type="number" id="bonusAmount" placeholder="Bonus" class="p-2 border rounded">
      <button type="submit" class="bg-green-500 text-white rounded">Calculate Salary</button>
    </form>
    <table class="w-full table-auto border-collapse border mt-2" id="salaryTable">
      <tr class="bg-gray-200"><th class="border p-2">Employee</th><th class="border p-2">Month</th><th class="border p-2">Net Salary</th><th class="border p-2">Payslip</th></tr>
    </table>
  </div>  <!-- ATTENDANCE CHART -->  <div class="card p-4 rounded shadow-md bg-white mb-6">
    <h3 class="text-xl font-semibold mb-2">Attendance Chart</h3>
    <canvas id="attendanceChart" height="100"></canvas>
  </div>
</div><!-- MODAL --><div class="modal" id="attendanceModal">
  <div class="bg-white p-4 rounded shadow-md w-96">
    <h3 class="text-lg font-semibold mb-2">Mark Attendance</h3>
    <select id="modalEmployee" class="p-2 border rounded mb-2"></select>
    <select id="modalStatus" class="p-2 border rounded mb-2">
      <option value="">Select Status</option>
      <option value="Present">Present</option>
      <option value="Absent">Absent</option>
      <option value="Late">Late</option>
    </select>
    <input type="number" id="modalLateMinutes" placeholder="Late minutes" class="p-2 border rounded mb-2">
    <input type="hidden" id="modalDate">
    <button class="w-full bg-blue-500 text-white rounded" onclick="saveAttendance()">Save</button>
    <button class="w-full mt-2 bg-gray-500 text-white rounded" onclick="closeModal()">Close</button>
  </div>
</div><script src="currencies.js"></script><script>
let employees=[], attendance=[], salaries=[], currencySymbols={};

// Load currencies
function loadCurrencies(){
  if(typeof currencies !== 'undefined'){
    const select = document.getElementById('empCurrency');
    currencies.forEach(c=>{
      const opt=document.createElement('option'); opt.value=c.code; opt.text=`${c.code} (${c.symbol})`;
      select.appendChild(opt); currencySymbols[c.code]=c.symbol;
    });
  }
}

function saveData(){
  localStorage.setItem('employees', JSON.stringify(employees));
  localStorage.setItem('attendance', JSON.stringify(attendance));
  localStorage.setItem('salaries', JSON.stringify(salaries));
}
function loadData(){
  employees=JSON.parse(localStorage.getItem('employees')||'[]');
  attendance=JSON.parse(localStorage.getItem('attendance')||'[]');
  salaries=JSON.parse(localStorage.getItem('salaries')||'[]');
  updateEmployeeTable(); updateEmployeeSelect(); renderAttendanceTable();
}

function updateEmployeeTable(){
  const table=document.getElementById('employeeTable');
  table.innerHTML="<tr class='bg-gray-200'><th class='border p-2'>Name</th><th class='border p-2'>Dept</th><th class='border p-2'>Designation</th><th class='border p-2'>Salary</th><th class='border p-2'>Currency</th><th class='border p-2'>Action</th></tr>";
  employees.forEach((e,i)=>{
    const row=table.insertRow();
    row.insertCell(0).innerText=e.name;
    row.insertCell(1).innerText=e.dept;
    row.insertCell(2).innerText=e.desig;
    row.insertCell(3).innerText=e.salary.toFixed(2);
    row.insertCell(4).innerText=e.currency;
    const btn=document.createElement('button'); btn.className='bg-red-500 text-white rounded px-2'; btn.innerText='Delete';
    btn.onclick=()=>{ employees.splice(i,1); updateEmployeeTable(); updateEmployeeSelect(); saveData(); };
    row.insertCell(5).appendChild(btn);
  });
}

function updateEmployeeSelect(){
  const selects=[document.getElementById('modalEmployee'), document.getElementById('salaryEmployee')];
  selects.forEach(sel=>{
    sel.innerHTML='<option value="">Select Employee</option>';
    employees.forEach((e,i)=>{
      const opt=document.createElement('option'); opt.value=i; opt.text=e.name; sel.appendChild(opt);
    });
  });
}

function openModal(date){
  document.getElementById('modalDate').value=date;
  document.getElementById('attendanceModal').style.display='flex';
}
function closeModal(){document.getElementById('attendanceModal').style.display='none';}
function saveAttendance(){
  const empIndex=document.getElementById('modalEmployee').value;
  const status=document.getElementById('modalStatus').value;
  const late=parseInt(document.getElementById('modalLateMinutes').value)||0;
  const date=document.getElementById('modalDate').value;
  if(empIndex===''||status===''){ alert('Select employee and status'); return; }
  attendance.push({date, empIndex:parseInt(empIndex), status, late}); renderAttendanceTable(); closeModal(); saveData();
}
function renderAttendanceTable(){
  const table=document.getElementById('attendanceTable');
  table.innerHTML="<tr class='bg-gray-200'><th class='border p-2'>Date</th><th class='border p-2'>Employee</th><th class='border p-2'>Status</th><th class='border p-2'>Late Minutes</th><th class='border p-2'>Action</th></tr>";
  attendance.forEach((a,i)=>{
    const row=table.insertRow();
    row.insertCell(0).innerText=a.date;
    row.insertCell(1).innerText=employees[a.empIndex]?.name||'';
    row.insertCell(2).innerText=a.status;
    row.insertCell(3).innerText=a.late;
    const btn=document.createElement('button'); btn.innerText='Delete'; btn.className='bg-red-500 text-white rounded px-2';
    btn.onclick=()=>{ attendance.splice(i,1); renderAttendanceTable(); saveData(); };
    row.insertCell(4).appendChild(btn);
  });
}

// Theme toggle
const themeBtn=document.getElementById('themeToggle');
themeBtn.addEventListener('click', ()=>{document.body.classList.toggle('dark');});

// LOGIN / SIGNUP
const loginDiv=document.getElementById('loginDiv');
const loginForm=document.getElementById('loginForm');
const signupForm=document.getElementById('signupForm');
const mainApp=document.getElementById('mainApp');
const logoutBtn=document.getElementById('logoutBtn');

document.getElementById('showLogin').addEventListener('click',()=>{loginForm.style.display='block';signupForm.style.display='none';});
document.getElementById('showSignup').addEventListener('click',()=>{loginForm.style.display='none';signupForm.style.display='block';});

if(localStorage.getItem('isLoggedIn')==='true'){ loginDiv.style.display='none'; mainApp.style.display='block'; loadData(); }

signupForm.addEventListener('submit', e=>{
  e.preventDefault();
  const user=document.getElementById('hrUserSignup').value.trim();
  const pass=document.getElementById('hrPassSignup').value.trim();
  if(!user||!pass){ alert('Enter username/password'); return; }
  localStorage.setItem('hrUser', user);
  localStorage.setItem('hrPass', pass);
  alert('Account created! Login now.');
  signupForm.reset(); loginForm.style.display='block'; signupForm.style.display='none';
});

loginForm.addEventListener('submit', e=>{
  e.preventDefault();
  const user=document.getElementById('hrUserLogin').value.trim();
  const pass=document.getElementById('hrPassLogin').value.trim();
  if(user===localStorage.getItem('hrUser') && pass===localStorage.getItem('hrPass')){
    localStorage.setItem('isLoggedIn','true'); loginDiv.style.display='none'; mainApp.style.display='block'; loadData();
  }else{ alert('Invalid credentials'); }
});

logoutBtn.addEventListener('click',()=>{
  localStorage.removeItem('isLoggedIn'); loginDiv.style.display='block'; mainApp.style.display='none';
});

// Add employee form
const addEmpForm=document.getElementById('addEmployeeForm');
addEmpForm.addEventListener('submit', e=>{
  e.preventDefault();
  const emp={
    name:document.getElementById('empName').value,
    dept:document.getElementById('empDept').value,
    desig:document.getElementById('empDesig').value,
    salary:parseFloat(document.getElementById('empSalary').value),
    currency:document.getElementById('empCurrency').value
  };
  employees.push(emp); updateEmployeeTable(); updateEmployeeSelect(); saveData(); addEmpForm.reset();
});

// Initialize currencies
loadCurrencies();
</script></body>
</html>
