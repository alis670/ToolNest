<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Employee Attendance Tracker</title><style>
:root{
  --bg:#f6f8fb; --card:#fff; --muted:#6b7280; --accent:#2563eb;
  --success:#10b981; --danger:#ef4444; --radius:10px;
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#0f172a;padding:18px}
.app{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 360px;gap:16px;align-items:start}
.card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(2,6,23,0.06)}
.header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:8px}
h1{margin:0;font-size:18px}
small.muted{color:var(--muted)}
input,select,textarea,button{font-family:inherit}
input,select,textarea{padding:8px;border-radius:8px;border:1px solid #e6eef8;background:#fff}
button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
.btn{font-weight:700}
.primary{background:var(--accent);color:#fff}
.ghost{background:#f1f5f9;border:1px solid #e6eef8}
.danger{background:var(--danger);color:#fff}
.table{margin-top:12px;overflow:auto;border-radius:8px;border:1px solid #eef2ff}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:8px;border-bottom:1px solid #f1f5f9;text-align:left}
th{background:#fbfdff;position:sticky;top:0}
.flex-end{display:flex;align-items:end;gap:8px;flex-wrap:wrap}
.filter-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-top:12px}
.day{padding:12px;border-radius:6px;text-align:center;background:#f1f5f9;cursor:pointer}
.day.present{background:#10b981;color:#fff}
.day.absent{background:#ef4444;color:#fff}
.day.late{background:#f59e0b;color:#fff}
@media (max-width:1000px){.app{grid-template-columns:1fr}} 
</style></head>
<body><div class="app">
  <!-- MAIN -->
  <div class="card">
    <div class="header">
      <div>
        <h1>Employee Attendance Tracker</h1>
      </div>
      <div style="min-width:180px">
        <label>Select Month</label>
        <input type="month" id="monthPicker">
      </div>
    </div><!-- Add Employee -->
<div style="display:grid;grid-template-columns:1fr 1fr auto;gap:8px;align-items:end;margin-bottom:12px">
  <div>
    <label>Employee Name</label>
    <input id="empName" placeholder="Enter name">
  </div>
  <div>
    <label>Department</label>
    <input id="empDept" placeholder="Enter department">
  </div>
  <div class="flex-end">
    <button id="addEmp" class="btn primary">Add Employee</button>
  </div>
</div>

<!-- Filters -->
<div class="filter-row">
  <div><label>Filter Employee</label><input id="filterEmp" placeholder="Search"></div>
  <div><label>Filter Department</label><input id="filterDept" placeholder="Search"></div>
  <div class="flex-end">
    <button id="applyFilter" class="btn ghost">Apply Filter</button>
  </div>
</div>

<!-- Calendar -->
<div id="calendar" class="calendar"></div>

<!-- Attendance Legend -->
<div style="margin-top:12px;display:flex;gap:12px;flex-wrap:wrap">
  <div class="day present">Present</div>
  <div class="day absent">Absent</div>
  <div class="day late">Late</div>
</div>

<!-- Export -->
<div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
  <button id="exportCsv" class="btn ghost">Export CSV</button>
  <button id="exportJson" class="btn ghost">Export JSON</button>
  <button id="exportPdf" class="btn ghost">Export PDF</button>
</div>

  </div>  <!-- SIDEBAR -->  <div class="card" style="display:flex;flex-direction:column;gap:12px">
    <h3>Employees</h3>
    <div id="empList" class="audit" style="max-height:500px;overflow:auto"></div>
  </div>
</div><script>
let employees=[];
let monthSelected=new Date().toISOString().slice(0,7);

const monthPicker=document.getElementById('monthPicker');
monthPicker.value=monthSelected;
monthPicker.addEventListener('change',()=>{monthSelected=monthPicker.value; renderCalendar();});

document.getElementById('addEmp').addEventListener('click',()=>{
  const name=document.getElementById('empName').value.trim();
  const dept=document.getElementById('empDept').value.trim();
  if(!name || !dept) return alert('Enter name & department');
  const emp={id:Date.now(),name,dept,attendance:{}};
  employees.push(emp);
  document.getElementById('empName').value='';
  document.getElementById('empDept').value='';
  renderEmployees();
  renderCalendar();
});

function renderEmployees(){
  const container=document.getElementById('empList');
  container.innerHTML=employees.map(e=>`<div>${e.name} - ${e.dept}</div>`).join('');
}

function renderCalendar(){
  const cal=document.getElementById('calendar');
  cal.innerHTML='';
  if(!monthSelected) return;
  const [year,month]=monthSelected.split('-').map(Number);
  const daysInMonth=new Date(year,month,0).getDate();
  for(let d=1;d<=daysInMonth;d++){
    const dayDiv=document.createElement('div');
    dayDiv.className='day';
    dayDiv.textContent=d;
    dayDiv.addEventListener('click',()=>markAttendance(d));
    cal.appendChild(dayDiv);
  }
}

function markAttendance(day){
  const status=prompt('Mark Present / Absent / Late');
  let lateMinutes=0;
  if(status && status.toLowerCase()==='late'){
    lateMinutes=prompt('Minutes late?')||0;
  }
  employees.forEach(e=>{e.attendance[`${monthSelected}-${day}`]={status,status,status==='late'?lateMinutes:0};});
  renderCalendar();
}

renderEmployees();
renderCalendar();
</script></body>
</html>
<!-- Added Manual Salary Input -->
<div class="salary-input" style="margin-top:20px;display:flex;flex-direction:column;gap:10px;">
  <label for="manualSalary">Enter Base Salary (Manual)</label>
  <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
    <select id="salaryCurrency" style="min-width:120px;">
      <!-- populated from currencies.js -->
    </select>
    <input id="manualSalary" type="number" placeholder="Enter Salary" style="flex:1;min-width:160px;">
  </div>
</div>
