<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolNest Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @keyframes fadeIn {0%{opacity:0}100%{opacity:1}}
  .animate-fadeIn {animation:fadeIn 0.5s ease-in;}
</style>
</head>
<body class="bg-gray-100 min-h-screen">

<header class="bg-white shadow-md p-4 flex justify-between items-center">
  <div class="flex items-center space-x-2">
    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold">TN</div>
    <h1 class="text-2xl font-bold text-gray-800">ToolNest</h1>
  </div>
</header>

<main class="max-w-7xl mx-auto p-6">
  <!-- Category Filter -->
  <div class="flex flex-wrap gap-2 mb-6" id="categoryContainer"></div>

  <!-- Tools Grid -->
  <div id="toolsGrid" class="grid md:grid-cols-3 sm:grid-cols-2 gap-6"></div>
</main>

<!-- Toast Container -->
<div id="toastContainer" class="fixed top-5 right-5 z-50"></div>

<!-- Logout Button -->
<button id="logoutBtn" class="fixed bottom-5 right-5 px-4 py-2 bg-red-500 text-white rounded-lg">Logout</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { tools } from './tools.js'; // JSON/object of tools

const firebaseConfig = {
  apiKey: "AIzaSyBuYXfr-_q-BJskWHN4chB8SZqMc-P9odw",
  authDomain: "toolnest-8e42d.firebaseapp.com",
  projectId: "toolnest-8e42d",
  storageBucket: "toolnest-8e42d.firebasestorage.app",
  messagingSenderId: "988256036107",
  appId: "1:988256036107:web:90f7e40f07593dff8e2e0e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const toastContainer = document.getElementById('toastContainer');
const logoutBtn = document.getElementById('logoutBtn');
const toolsGrid = document.getElementById('toolsGrid');
const categoryContainer = document.getElementById('categoryContainer');

// Toast function
function showToast(msg, type="success"){
  const toast = document.createElement('div');
  toast.innerText = msg;
  toast.className = `px-4 py-2 mb-2 rounded shadow-lg text-white ${type==="success"?"bg-green-500":"bg-red-500"} animate-fadeIn`;
  toastContainer.appendChild(toast);
  setTimeout(()=>toast.remove(),3000);
}

// Logout
logoutBtn.onclick = async () => {
  await signOut(auth);
  window.location.href = "index.html";
}

// Auth state
onAuthStateChanged(auth, user => {
  if(!user) window.location.href="index.html";
});

// Generate categories dynamically
const categories = [...new Set(tools.map(t=>t.category))];
categories.unshift("All"); // Add All
categories.forEach(cat=>{
  const btn = document.createElement('button');
  btn.innerText = cat;
  btn.className = "px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700";
  btn.onclick = () => displayTools(cat);
  categoryContainer.appendChild(btn);
});

// Display tools based on category
function displayTools(category="All"){
  toolsGrid.innerHTML = "";
  let filtered = category==="All"?tools:tools.filter(t=>t.category===category);
  filtered.forEach(t=>{
    const div = document.createElement('div');
    div.className="bg-white p-4 rounded-xl shadow hover:shadow-lg animate-fadeIn";
    div.innerHTML=`<h3 class="font-semibold text-lg">${t.name}</h3><p class="text-gray-600">${t.description||""}</p><a href="${t.link}" target="_blank" class="text-blue-500 mt-2 inline-block">Open</a>`;
    toolsGrid.appendChild(div);
  });
}

// Initial display
displayTools();
</script>
</body>
</html>
