<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolNest Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@keyframes fadeIn {0%{opacity:0}100%{opacity:1}}
.animate-fadeIn {animation:fadeIn 0.5s ease-in;}
.backdrop-blur {backdrop-filter: blur(10px);}
</style>
</head>
<body class="bg-gradient-to-r from-blue-400 to-purple-600 min-h-screen text-white">

<main id="dashboardContainer" class="max-w-7xl mx-auto p-6 space-y-12">
  <h1 class="text-3xl font-bold mb-6 text-white">ToolNest Dashboard</h1>
  <div id="categoriesContainer" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</main>

<div id="toastContainer" class="fixed top-5 right-5 z-50"></div>

<script type="module">
import { auth } from './firebase.js';
import { signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

// Elements
const categoriesContainer = document.getElementById('categoriesContainer');
const toastContainer = document.getElementById('toastContainer');

// Logout button
const logoutBtn = document.createElement('button');
logoutBtn.className="fixed bottom-5 right-5 px-4 py-2 bg-red-500 text-white rounded-lg hidden";
logoutBtn.innerText="Logout";
document.body.appendChild(logoutBtn);
logoutBtn.addEventListener('click', async ()=>{ await signOut(auth); showToast("Logged out successfully!"); });

// Toast
function showToast(msg,type="success"){
  const toast=document.createElement('div');
  toast.innerText=msg;
  toast.className=`px-4 py-2 mb-2 rounded shadow-lg text-white ${type==="success"?"bg-green-500":"bg-red-500"} animate-fadeIn`;
  toastContainer.appendChild(toast);
  setTimeout(()=>toast.remove(),3000);
}

// Dashboard categories
const categories = [
  { name: "Finance & Accounting", icon: "ðŸ’°", tools: ["ROI Calculator","Profit Margin Calculator","Break-even Analyzer","Loan EMI Calculator","Tax / GST / VAT Calculator","Currency Converter","Expense Tracker","Cash Flow Analyzer","Salary / Payroll Sheet"] },
  { name: "Business Management", icon: "ðŸ“Š", tools: ["Revenue Forecast Tool","Budget Planner","Employee Attendance Tracker","Invoice Generator","Business Proposal Template","Time Tracking Tool","Meeting Notes Template"] },
  { name: "E-commerce & Marketing", icon: "ðŸ›’", tools: ["Product Pricing Calculator","Discount Finder","Inventory Tracker","Keyword Research Tool","Competitor Tracker","Profit & Fee Calculator","Product Launch Planner"] },
  { name: "Data & Productivity", icon: "ðŸ“ˆ", tools: ["Google Sheets Templates","Excel Business Templates","CSV â†’ Excel Converter","Sheet Merger Tool","Data Cleaner","Dashboard Template"] },
  { name: "AI & Automation", icon: "ðŸ¤–", tools: ["ChatGPT Assistant","Gemini UI","Auto Email Generator","Task Automation Templates","AI Name/Slogan Generator","Document Summarizer"] },
  { name: "Design & Branding", icon: "ðŸŽ¨", tools: ["Logo Maker","Business Card Template","Brand Color Palette Generator","Social Media Post Caption Generator"] },
  { name: "Website & SEO", icon: "ðŸŒ", tools: ["Meta Tag Generator","SEO Keyword Density Checker","Backlink Tracker","Sitemap XML Generator","Page Speed Tester"] },
  { name: "Communication & Management", icon: "ðŸ’¬", tools: ["Project Task Manager","Team Chat UI","Client Feedback Form","Email Signature Generator"] },
  { name: "Premium Tools", icon: "ðŸš€", tools: ["MarketNest Pro Analyzer","Business Intelligence Dashboard","AI Data Visualizer","Multi-user Team Workspace"] }
];

function renderDashboard(){
  categoriesContainer.innerHTML="";
  categories.forEach(cat=>{
    const catDiv=document.createElement('div');
    catDiv.className="bg-white/10 backdrop-blur rounded-xl shadow p-4 hover:shadow-lg";
    const catHeader=document.createElement('div');
    catHeader.className="flex items-center mb-3";
    const iconSpan=document.createElement('span');
    iconSpan.className="text-3xl mr-3";
    iconSpan.innerText=cat.icon;
    const nameSpan=document.createElement('span');
    nameSpan.className="font-semibold text-lg";
    nameSpan.innerText=cat.name;
    catHeader.append(iconSpan,nameSpan);
    catDiv.appendChild(catHeader);
    const toolsList=document.createElement('ul');
    toolsList.className="list-disc list-inside text-white/80 space-y-1";
    cat.tools.forEach(tool=>{
      const li=document.createElement('li');
      li.innerText=tool;
      toolsList.appendChild(li);
    });
    catDiv.appendChild(toolsList);
    categoriesContainer.appendChild(catDiv);
  });
}

// Auth state
onAuthStateChanged(auth,user=>{
  if(user){
    renderDashboard();
    logoutBtn.classList.remove('hidden');
  } else {
    window.location.href="auth.html"; // redirect to login
  }
});
</script>
</body>
</html>
