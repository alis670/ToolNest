<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolNest Dashboard</title>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@keyframes fadeIn {0%{opacity:0}100%{opacity:1}}
.animate-fadeIn {animation:fadeIn 0.5s ease-in;}
.backdrop-blur {backdrop-filter: blur(10px);}
</style>
</head>
<body class="bg-gradient-to-r from-blue-400 to-purple-600 min-h-screen text-white">

<!-- Auth Modal -->
<div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
  <div class="bg-white/10 backdrop-blur rounded-xl w-96 p-6 shadow-lg relative animate-fadeIn border border-white/20">
    <div class="text-center mb-4 flex flex-col items-center">
      <div class="w-20 h-20 rounded-full bg-gradient-to-r from-blue-400 to-purple-600 flex items-center justify-center shadow-lg">
        <span class="text-white text-2xl font-bold">ToolNest</span>
      </div>
    </div>
    <h2 id="modalTitle" class="text-xl font-semibold text-center mb-4 text-white">ToolNest</h2>
    <input type="text" id="userInput" placeholder="Email or +CountryCode Phone" class="w-full p-2 border rounded mb-3 bg-white/30 text-white placeholder-white" />
    <div class="relative">
      <input type="password" id="password" placeholder="Password" class="w-full p-2 border rounded mb-3 bg-white/30 text-white placeholder-white" />
      <span id="togglePass" class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-white">üëÅÔ∏è</span>
    </div>
    <input type="text" id="otpCode" placeholder="Enter OTP" class="w-full p-2 border rounded mb-3 bg-white/30 text-white placeholder-white hidden" />
    <div id="recaptcha-container"></div>
    <button id="continueBtn" class="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold mb-3">Continue</button>
    <p id="toggleAuth" class="text-center text-sm text-blue-400 mt-2 cursor-pointer">Create an account</p>
    <p id="forgotPass" class="text-center text-sm text-gray-300 mt-1 cursor-pointer">Forgot Password?</p>
    <button id="googleSignIn" class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold mt-4">Continue with Google</button>
    <button id="facebookSignIn" class="w-full bg-blue-800 text-white py-2 rounded-lg font-semibold mt-2">Continue with Facebook</button>
  </div>
</div>

<!-- Dashboard -->
<main id="dashboardContainer" class="max-w-7xl mx-auto p-6 space-y-12 hidden">
  <h1 class="text-3xl font-bold mb-6 text-white">ToolNest Dashboard</h1>
  <div id="categoriesContainer" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</main>

<!-- Toast Container -->
<div id="toastContainer" class="fixed top-5 right-5 z-50"></div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBuYXfr-_q-BJskWHN4chB8SZqMc-P9odw",
    authDomain: "toolnest-8e42d.firebaseapp.com",
    projectId: "toolnest-8e42d",
    storageBucket: "toolnest-8e42d.firebasestorage.app",
    messagingSenderId: "988256036107",
    appId: "1:988256036107:web:90f7e40f07593dff8e2e0e"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Elements
  const authModal = document.getElementById('authModal');
  const continueBtn = document.getElementById('continueBtn');
  const toggleAuth = document.getElementById('toggleAuth');
  const forgotPass = document.getElementById('forgotPass');
  const userInput = document.getElementById('userInput');
  const passwordInput = document.getElementById('password');
  const otpInput = document.getElementById('otpCode');
  const googleSignIn = document.getElementById('googleSignIn');
  const facebookSignIn = document.getElementById('facebookSignIn');
  const dashboardContainer = document.getElementById('dashboardContainer');
  const categoriesContainer = document.getElementById('categoriesContainer');
  const toastContainer = document.getElementById('toastContainer');
  const togglePass = document.getElementById('togglePass');

  let isSignup = false;

  function showToast(msg, type="success"){
    const toast = document.createElement('div');
    toast.innerText = msg;
    toast.className = `px-4 py-2 mb-2 rounded shadow-lg text-white ${type==="success"?"bg-green-500":"bg-red-500"} animate-fadeIn`;
    toastContainer.appendChild(toast);
    setTimeout(()=>toast.remove(),3000);
  }

  togglePass.addEventListener('click', ()=> {
    passwordInput.type = passwordInput.type==="password"?"text":"password";
  });

  function toggleModal(signup){
    isSignup = signup;
    continueBtn.innerText = signup?"Sign Up":"Continue";
    toggleAuth.innerText = signup?"Already have an account?":"Create an account";
    userInput.value="";
    passwordInput.value="";
    otpInput.value="";
    passwordInput.classList.remove('hidden');
    otpInput.classList.add('hidden');
  }
  toggleAuth.addEventListener('click', ()=>toggleModal(!isSignup));

  // Google login
  googleSignIn.addEventListener('click', async ()=>{
    const provider = new firebase.auth.GoogleAuthProvider();
    try{ await auth.signInWithPopup(provider); showToast("Google login successful!"); } 
    catch(e){ showToast(e.message,"error"); }
  });

  // Facebook login
  facebookSignIn.addEventListener('click', async ()=>{
    const provider = new firebase.auth.FacebookAuthProvider();
    try{ await auth.signInWithPopup(provider); showToast("Facebook login successful!"); } 
    catch(e){ showToast(e.message,"error"); }
  });

  // Email login/signup
  continueBtn.addEventListener('click', async ()=>{
    const input = userInput.value.trim();
    const password = passwordInput.value.trim();
    if(!input.includes("@")){ showToast("Enter valid email","error"); return; }
    if(!password){ showToast("Enter password","error"); return; }
    try{
      if(isSignup){
        await auth.createUserWithEmailAndPassword(input,password);
        showToast("Account created successfully!");
      } else {
        await auth.signInWithEmailAndPassword(input,password);
        showToast("Login successful!");
      }
      authModal.classList.add('hidden');
    } catch(e){ showToast(e.message,"error"); }
  });

  // Forgot password
  forgotPass.addEventListener('click', async ()=>{
    const email = userInput.value.trim();
    if(!email.includes("@")){ showToast("Enter valid email","error"); return; }
    try{ await auth.sendPasswordResetEmail(email); showToast("Password reset email sent!"); }
    catch(e){ showToast(e.message,"error"); }
  });

  // Logout button
  const logoutBtn = document.createElement('button');
  logoutBtn.className="fixed bottom-5 right-5 px-4 py-2 bg-red-500 text-white rounded-lg hidden";
  logoutBtn.innerText="Logout";
  document.body.appendChild(logoutBtn);
  logoutBtn.addEventListener('click', async ()=>{
    await auth.signOut();
    showToast("Logged out successfully!");
  });

  // Categories & Tools (unchanged)
  const categories = [
    { name: "Finance & Accounting", icon: "üí∞", tools: ["ROI Calculator","Profit Margin Calculator","Break-even Analyzer","Loan EMI Calculator","Tax / GST / VAT Calculator","Currency Converter","Expense Tracker","Cash Flow Analyzer","Salary / Payroll Sheet"] },
    { name: "Business Management", icon: "üìä", tools: ["Revenue Forecast Tool","Budget Planner","Employee Attendance Tracker","Invoice Generator","Business Proposal Template","Time Tracking Tool","Meeting Notes Template"] },
    { name: "E-commerce & Marketing", icon: "üõí", tools: ["Product Pricing Calculator","Discount Finder","Inventory Tracker","Keyword Research Tool","Competitor Tracker","Profit & Fee Calculator","Product Launch Planner"] },
    { name: "Data & Productivity", icon: "üìà", tools: ["Google Sheets Templates","Excel Business Templates","CSV ‚Üí Excel Converter","Sheet Merger Tool","Data Cleaner","Dashboard Template"] },
    { name: "AI & Automation", icon: "ü§ñ", tools: ["ChatGPT Assistant","Gemini UI","Auto Email Generator","Task Automation Templates","AI Name/Slogan Generator","Document Summarizer"] },
    { name: "Design & Branding", icon: "üé®", tools: ["Logo Maker","Business Card Template","Brand Color Palette Generator","Social Media Post Caption Generator"] },
    { name: "Website & SEO", icon: "üåê", tools: ["Meta Tag Generator","SEO Keyword Density Checker","Backlink Tracker","Sitemap XML Generator","Page Speed Tester"] },
    { name: "Communication & Management", icon: "üí¨", tools: ["Project Task Manager","Team Chat UI","Client Feedback Form","Email Signature Generator"] },
    { name: "Premium Tools", icon: "üöÄ", tools: ["MarketNest Pro Analyzer","Business Intelligence Dashboard","AI Data Visualizer","Multi-user Team Workspace"] }
  ];

  function renderDashboard(){
    categoriesContainer.innerHTML="";
    categories.forEach(cat=>{
      const catDiv=document.createElement('div');
      catDiv.className="bg-white/10 backdrop-blur rounded-xl shadow p-4 hover:shadow-lg";
      const catHeader=document.createElement('div');
      catHeader.className="flex items-center mb-3";
      const iconSpan=document.createElement('span');
      iconSpan.className="text-3xl mr-3";
      iconSpan.innerText=cat.icon;
      const nameSpan=document.createElement('span');
      nameSpan.className="font-semibold text-lg";
      nameSpan.innerText=cat.name;
      catHeader.append(iconSpan,nameSpan);
      catDiv.appendChild(catHeader);
      const toolsList=document.createElement('ul');
      toolsList.className="list-disc list-inside text-white/80 space-y-1";
      cat.tools.forEach(tool=>{
        const li=document.createElement('li');
        li.innerText=tool;
        toolsList.appendChild(li);
      });
      catDiv.appendChild(toolsList);
      categoriesContainer.appendChild(catDiv);
    });
  }

  auth.onAuthStateChanged(user=>{
    if(user){
      dashboardContainer.classList.remove('hidden');
      authModal.classList.add('hidden');
      logoutBtn.classList.remove('hidden');
      renderDashboard();
    } else {
      dashboardContainer.classList.add('hidden');
      logoutBtn.classList.add('hidden');
      authModal.classList.remove('hidden');
      toggleModal(false);
    }
  });
</script>
</body>
</html>
