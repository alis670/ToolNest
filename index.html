<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolNest Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
<style>
.backdrop-blur {backdrop-filter: blur(10px);}
.animate-fadeIn {animation: fadeIn 0.5s ease-in;}
@keyframes fadeIn {0%{opacity:0}100%{opacity:1}}
/* Professional Header */
header a { transition: color 0.3s; }
header a:hover { color: #4f46e5; }
</style>
</head>
<body class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 min-h-screen">

<!-- Auth Modal (Unchanged) -->
<div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white/10 backdrop-blur rounded-xl w-96 p-6 shadow-lg relative animate-fadeIn border border-white/20">

    <!-- ToolNest Logo -->
    <div class="text-center mb-4 flex flex-col items-center">
      <div class="w-20 h-20 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg">
        <span class="text-white text-2xl font-bold">ToolNest</span>
      </div>
    </div>

    <h2 id="modalTitle" class="text-xl font-semibold text-center mb-4 text-white">ToolNest</h2>

    <!-- User input -->
    <input type="text" id="userInput" placeholder="Email or Phone Number" class="w-full p-2 border rounded mb-3 bg-white/30 text-white placeholder-white" />

    <!-- Password Input -->
    <div class="relative">
      <input type="password" id="password" placeholder="Password" class="w-full p-2 rounded mb-3 bg-white/30 text-white placeholder-white">
      <span id="togglePass" class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-white text-xl select-none">üôà</span>
    </div>

    <!-- OTP Input -->
    <input type="text" id="otpCode" placeholder="Enter OTP" class="w-full p-2 border rounded mb-3 bg-white/30 text-white placeholder-white hidden" />

    <button id="continueBtn" class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold mb-3">Continue</button>

    <p id="toggleAuth" class="text-center text-sm text-blue-400 mt-2 cursor-pointer">Create an account</p>
    <p id="forgotPass" class="text-center text-sm text-gray-300 mt-1 cursor-pointer">Forgot Password?</p>

    <button id="googleSignIn" class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold mt-4">Continue with Google</button>
    <button id="facebookSignIn" class="w-full bg-blue-800 text-white py-2 rounded-lg font-semibold mt-2">Continue with Facebook</button>

  </div>
</div>

<!-- Dashboard -->
<main id="dashboardContainer" class="max-w-7xl mx-auto p-6 space-y-12 hidden">

  <!-- Header -->
  <header class="flex flex-col md:flex-row items-center justify-between mb-8 space-y-4 md:space-y-0">
    <div class="flex items-center space-x-3">
      <div class="w-12 h-12 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-xl shadow-lg">TN</div>
      <h1 class="text-2xl font-bold text-white">ToolNest Dashboard</h1>
    </div>
    <nav class="space-x-6 text-white font-semibold">
      <a href="#aboutUsSection">About Us</a>
      <a href="#contactUsSection">Contact</a>
    </nav>
  </header>

  <!-- Categories Grid -->
  <section id="categoriesGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></section>

  <!-- About Us Section -->
  <section id="aboutUsSection" class="bg-white/20 backdrop-blur p-6 rounded-xl shadow space-y-4 text-gray-700">
    <h2 class="text-xl font-semibold">About Us</h2>
    <p>ToolNest is your all-in-one professional dashboard platform offering tools across Finance, Business, AI, Design, and more. Our mission is to empower professionals with seamless productivity solutions.</p>
  </section>

  <!-- Contact Us Section -->
  <section id="contactUsSection" class="bg-white/20 backdrop-blur p-6 rounded-xl shadow space-y-4 text-gray-700">
    <h2 class="text-xl font-semibold">Contact Us</h2>
    <form id="contactForm" class="space-y-4">
      <input type="text" placeholder="Name" class="w-full p-2 rounded bg-white/30 placeholder-gray-700 border border-white/20">
      <input type="email" placeholder="Email" class="w-full p-2 rounded bg-white/30 placeholder-gray-700 border border-white/20">
      <textarea placeholder="Message" class="w-full p-2 rounded bg-white/30 placeholder-gray-700 border border-white/20"></textarea>
      <button type="submit" class="bg-indigo-600 text-white py-2 px-4 rounded font-semibold hover:bg-indigo-700">Send</button>
    </form>
  </section>

  <!-- Footer -->
  <footer class="mt-12 text-center text-white/70">
    ¬© All rights reserved by ToolNest
  </footer>

  <!-- Back to Top -->
  <button id="backToTopBtn" class="fixed bottom-20 right-5 bg-purple-600 text-white p-3 rounded-full shadow-lg hover:bg-purple-700 hidden z-40">üîù</button>

</main>

<!-- Toast container -->
<div id="toastContainer" class="fixed top-5 right-5 z-50"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword, 
  signOut, 
  sendPasswordResetEmail,
  onAuthStateChanged,
  GoogleAuthProvider,
  FacebookAuthProvider,
  signInWithPopup,
  RecaptchaVerifier,
  signInWithPhoneNumber
} from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyBuYXfr-_q-BJskWHN4chB8SZqMc-P9odw",
  authDomain: "toolnest-8e42d.firebaseapp.com",
  projectId: "toolnest-8e42d",
  storageBucket: "toolnest-8e42d.firebasestorage.app",
  messagingSenderId: "988256036107",
  appId: "1:988256036107:web:90f7e40f07593dff8e2e0e"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const googleProvider = new GoogleAuthProvider();
const facebookProvider = new FacebookAuthProvider();

// Elements
const authModal = document.getElementById('authModal');
const continueBtn = document.getElementById('continueBtn');
const toggleAuth = document.getElementById('toggleAuth');
const forgotPass = document.getElementById('forgotPass');
const userInput = document.getElementById('userInput');
const passwordInput = document.getElementById('password');
const otpInput = document.getElementById('otpCode');
const googleSignIn = document.getElementById('googleSignIn');
const facebookSignIn = document.getElementById('facebookSignIn');
const dashboardContainer = document.getElementById('dashboardContainer');
const categoriesGrid = document.getElementById('categoriesGrid');
const toastContainer = document.getElementById('toastContainer');
const togglePass = document.getElementById('togglePass');

let isSignup = false;

// Toast
function showToast(msg,type="success"){
  const t = document.createElement('div');
  t.innerText = msg;
  t.className = `px-4 py-2 mb-2 rounded shadow-lg text-white ${type==="success"?"bg-green-500":"bg-red-500"} animate-fadeIn`;
  toastContainer.appendChild(t);
  setTimeout(()=>t.remove(),3000);
}

// Show/hide password
togglePass.addEventListener('click', ()=>{
  if(passwordInput.type==="password"){ passwordInput.type="text"; togglePass.innerText="üëÅÔ∏è"; } 
  else { passwordInput.type="password"; togglePass.innerText="üôà"; }
});

// Toggle modal
function toggleModal(signup){
  isSignup = signup;
  continueBtn.innerText = signup?"Sign Up":"Continue";
  toggleAuth.innerText = signup?"Already have an account?":"Create an account";
  userInput.value=""; passwordInput.value=""; otpInput.value="";
  passwordInput.classList.remove('hidden'); otpInput.classList.add('hidden');
}
toggleAuth.addEventListener('click',()=>toggleModal(!isSignup));

// Google login
googleSignIn.addEventListener('click', async ()=>{
  try{ await signInWithPopup(auth,googleProvider); showToast("Google login successful!"); }catch(e){showToast(e.message,"error");}
});

// Facebook login
facebookSignIn.addEventListener('click', async ()=>{
  try{ await signInWithPopup(auth,facebookProvider); showToast("Facebook login successful!"); }catch(e){showToast(e.message,"error");}
});

// Continue button logic
continueBtn.addEventListener('click', async ()=>{
  const input = userInput.value.trim();
  const pass = passwordInput.value.trim();
  const otp = otpInput.value.trim();

  if(otpInput.classList.contains('block') && otp){
    try{ await window.confirmationResult.confirm(otp); showToast("Phone login successful!"); otpInput.classList.add('hidden'); otpInput.classList.remove('block'); return; }
    catch(e){ showToast(e.message,"error"); return; }
  }

  if(input.startsWith("+") && !otpInput.classList.contains('block')){
    try{
      window.recaptchaVerifier = new RecaptchaVerifier(continueBtn, {size:'invisible'}, auth);
      const confirmationResult = await signInWithPhoneNumber(auth,input,window.recaptchaVerifier);
      window.confirmationResult = confirmationResult;
      otpInput.classList.remove('hidden'); otpInput.classList.add('block');
      passwordInput.classList.add('hidden');
      showToast("OTP sent to your phone");
    }catch(e){showToast(e.message,"error");}
    return;
  }

  if(input.includes("@")){
    passwordInput.classList.remove('hidden');
    if(!pass){ showToast("Enter password","error"); return; }
    try{
      if(isSignup){ await createUserWithEmailAndPassword(auth,input,pass); showToast("Account created successfully!"); }
      else{ await signInWithEmailAndPassword(auth,input,pass); showToast("Login successful!"); }
      authModal.classList.add('hidden');
    }catch(e){showToast(e.message,"error");}
    return;
  }

  showToast("Enter valid email or phone number","error");
});

// Forgot password
forgotPass.addEventListener('click', async ()=>{
  const email = userInput.value.trim();
  if(!email.includes("@")){ showToast("Enter valid email","error"); return; }
  try{ await sendPasswordResetEmail(auth,email); showToast("Password reset email sent!"); }
  catch(e){showToast(e.message,"error");}
});

// Logout button
const logoutBtn = document.createElement('button');
logoutBtn.className="fixed bottom-5 right-5 px-4 py-2 bg-red-500 text-white rounded-lg hidden z-50";
logoutBtn.innerText="Logout";
document.body.appendChild(logoutBtn);
logoutBtn.addEventListener('click', async ()=>{ await signOut(auth); showToast("Logged out successfully!"); });

// Categories with tools, icons, and page links
const categories = [
  {
    name: "Finance & Accounting",
    icon: "üí∞",
    tools: [
      { name: "ROI Calculator", page: "roi-calculator.html" },
      { name: "Profit Margin Calculator", page: "profit-margin-calculator.html" },
      { name: "Break-even Analyzer", page: "break-even-analyzer.html" },
      { name: "Loan EMI Calculator", page: "loan-emi-calculator.html" },
      { name: "Tax / GST / VAT Calculator", page: "tax-gst-vat-calculator.html" },
      { name: "Currency Converter", page: "currency-converter.html" },
      { name: "Expense Tracker", page: "expense-tracker.html" },
      { name: "Cash Flow Analyzer", page: "cash-flow-analyzer.html" },
      { name: "Salary / Payroll Sheet", page: "salary-payroll-sheet.html" }
    ]
  },
  {
    name: "Business Management",
    icon: "üìä",
    tools: [
      { name: "Revenue Forecast Tool", page: "revenue-forecast-tool.html" },
      { name: "Budget Planner", page: "budget-planner.html" },
      { name: "Employee Attendance Tracker", page: "employee-attendance-tracker.html" },
      { name: "Invoice Generator", page: "invoice-generator.html" },
      { name: "Business Proposal Template", page: "business-proposal-template.html" },
      { name: "Time Tracking Tool", page: "time-tracking-tool.html" },
      { name: "Meeting Notes Template", page: "meeting-notes-template.html" }
    ]
  },
  {
    name: "E-commerce & Marketing",
    icon: "üõí",
    tools: [
      { name: "Product Pricing Calculator", page: "product-pricing-calculator.html" },
      { name: "Discount Finder", page: "discount-finder.html" },
      { name: "Inventory Tracker", page: "inventory-tracker.html" },
      { name: "Keyword Research Tool", page: "keyword-research-tool.html" },
      { name: "Competitor Tracker", page: "competitor-tracker.html" },
      { name: "Profit & Fee Calculator", page: "profit-fee-calculator.html" },
      { name: "Product Launch Planner", page: "product-launch-planner.html" }
    ]
  },
  {
    name: "Data & Productivity",
    icon: "üìà",
    tools: [
      { name: "Google Sheets Templates", page: "google-sheets-templates.html" },
      { name: "Excel Business Templates", page: "excel-business-templates.html" },
      { name: "CSV ‚Üí Excel Converter", page: "csv-excel-converter.html" },
      { name: "Sheet Merger Tool", page: "sheet-merger-tool.html" },
      { name: "Data Cleaner", page: "data-cleaner.html" },
      { name: "Dashboard Template", page: "dashboard-template.html" }
    ]
  },
  {
    name: "AI & Automation",
    icon: "ü§ñ",
    tools: [
      { name: "ChatGPT Assistant", page: "chatgpt-assistant.html" },
      { name: "Gemini UI", page: "gemini-ui.html" },
      { name: "Auto Email Generator", page: "auto-email-generator.html" },
      { name: "Task Automation Templates", page: "task-automation-templates.html" },
      { name: "AI Name/Slogan Generator", page: "ai-name-slogan-generator.html" },
      { name: "Document Summarizer", page: "document-summarizer.html" }
    ]
  },
  {
    name: "Design & Branding",
    icon: "üé®",
    tools: [
      { name: "Logo Maker", page: "logo-maker.html" },
      { name: "Business Card Template", page: "business-card-template.html" },
      { name: "Brand Color Palette Generator", page: "brand-color-palette-generator.html" },
      { name: "Social Media Post Caption Generator", page: "social-media-caption-generator.html" }
    ]
  },
  {
    name: "Website & SEO",
    icon: "üåê",
    tools: [
      { name: "Meta Tag Generator", page: "meta-tag-generator.html" },
      { name: "SEO Keyword Density Checker", page: "seo-keyword-density-checker.html" },
      { name: "Backlink Tracker", page: "backlink-tracker.html" },
      { name: "Sitemap XML Generator", page: "sitemap-xml-generator.html" },
      { name: "Page Speed Tester", page: "page-speed-tester.html" }
    ]
  },
  {
    name: "Communication & Management",
    icon: "üí¨",
    tools: [
      { name: "Project Task Manager", page: "project-task-manager.html" },
      { name: "Team Chat UI", page: "team-chat-ui.html" },
      { name: "Client Feedback Form", page: "client-feedback-form.html" },
      { name: "Email Signature Generator", page: "email-signature-generator.html" }
    ]
  },
  {
    name: "Premium Tools",
    icon: "üöÄ",
    tools: [
      { name: "MarketNest Pro Analyzer", page: "marketnest-pro-analyzer.html" },
      { name: "Business Intelligence Dashboard", page: "business-intelligence-dashboard.html" },
      { name: "AI Data Visualizer", page: "ai-data-visualizer.html" },
      { name: "Multi-user Team Workspace", page: "multiuser-team-workspace.html" }
    ]
  }
];

function renderDashboard(){
  categoriesGrid.innerHTML = "";
  categories.forEach(cat => {
    const catCard = document.createElement('div');
    catCard.className = "bg-white/10 p-4 rounded-xl shadow hover:shadow-lg transition duration-300 space-y-3";

    // Category Header
    const catHeader = document.createElement('div');
    catHeader.className = "flex items-center space-x-2 text-white";
    const icon = document.createElement('span'); icon.className="text-3xl"; icon.innerText = cat.icon;
    const name = document.createElement('span'); name.className="font-semibold text-lg"; name.innerText = cat.name;
    catHeader.append(icon,name);
    catCard.appendChild(catHeader);

    // Tools List
    const toolsList = document.createElement('div'); toolsList.className="grid gap-2";
    cat.tools.forEach(tool => {
      const toolBox = document.createElement('div');
      toolBox.className="bg-white/20 p-2 rounded cursor-pointer hover:bg-indigo-500 transition duration-200 text-white";
      toolBox.innerText = tool;

      let isActive = false;
      toolBox.addEventListener('click', ()=>{
        if(!isActive){
          toolBox.classList.add('bg-indigo-400', 'font-semibold');
          isActive = true;
        } else {
          alert(`Opening ${tool}...`);
        }
      });

      toolsList.appendChild(toolBox);
    });

    catCard.appendChild(toolsList);
    categoriesGrid.appendChild(catCard);
  });
}

// Back to Top
const backToTopBtn = document.getElementById('backToTopBtn');
window.addEventListener('scroll', ()=>{
  if(window.scrollY > 300) backToTopBtn.classList.remove('hidden');
  else backToTopBtn.classList.add('hidden');
});
backToTopBtn.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));

// Contact Form Submit
document.getElementById('contactForm').addEventListener('submit', e=>{
  e.preventDefault();
  alert('Message sent!');
});

// Auth state change
onAuthStateChanged(auth,user=>{
  if(user){ 
    dashboardContainer.classList.remove('hidden'); 
    authModal.classList.add('hidden'); 
    logoutBtn.classList.remove('hidden'); 
    renderDashboard(); 
  } else { 
    dashboardContainer.classList.add('hidden'); 
    logoutBtn.classList.add('hidden'); 
    authModal.classList.remove('hidden'); 
    toggleModal(false);
  }
});
</script>
</body>
</html>
